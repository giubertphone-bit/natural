---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <div class="welcome-container">
    <div class="imgCover">
      <div class="intro">
        <h2>
          Fresh Ideas. Greener Spaces.
          <h4>We’re Just Putting the Final Touches</h4>
        </h2>
      </div>
      <div class="form-container">
        <h2>Contact Us</h2>
        <form id="emailForm">
          <input type="email" name="email" placeholder="Email" required />
          <input type="text" name="name" placeholder="Name" required />
          <input type="tel" name="phone" placeholder="Phone Number" />

          <select name="interest" required>
            <option value="" disabled selected>I’m interested in…</option>
            <option value="Lawn Maintenance">Lawn Maintenance</option>
            <option value="Lawn Treatment">Lawn Treatment</option>
            <option value="Commercial Services">Commercial Services</option>
            <option value="Installations">Installations</option>
            <option value="Irrigation">Irrigation</option>
            <option value="Landscape Design">Landscape Design</option>
          </select>

          <input
            type="text"
            name="website"
            class="honeypot"
            autocomplete="off"
          />
          <button type="submit">Contact Us</button>
          <div class="menuOut">
            <a class="callNow" href="tel:+1-847-555-5555">
              Call Us 305-555-5555</a
            >
          </div>
        </form>
      </div>
    </div>
  </div>
</Layout>
<script>
  // sript to handle form submission
  // using google apps script
  // coonects to a google sheet in order to avoid spam and security issues
  // This script handles the form submission and sends data to a Google Apps Script endpoint

  const emailForm = document.getElementById("emailForm");
  if (emailForm) {
    emailForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const form = e.target as HTMLFormElement;
      if (!form) return;
      const formData = new FormData(form);
      const honeypot = formData.get("website") ?? "";
      if (honeypot !== "") return;

      const data = new URLSearchParams();
      data.append("email", String(formData.get("email") ?? ""));
      data.append("name", String(formData.get("name") ?? ""));
      data.append("phone", String(formData.get("phone") ?? ""));
      data.append("interest", form.interest.value);
      data.append("time", new Date().toISOString());

      fetch(
        "https://script.google.com/macros/s/AKfycbyVNfV8i7-voK4xiCCjNnNgqDRAxO9HkE6DqrLxgW1l6J_F-FP9fGX0G8UUVjljDuHlQg/exec",
        {
          method: "POST",
          body: data,
        }
      )
        .then(() => {
          alert("We will contact you shortly!");
          form.reset();
        })
        .catch(() => {
          alert("Submission failed. Please try again.");
        });
    });
  }
</script>

<style>
  .welcome-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .imgCover {
    margin: 0;
    padding: 0;
    background-image: url("/img/lawn.jpg"); /* replace with desired background image */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed; /* Optional: keeps image fixed during scroll but not currently used*/
    font-family: Arial, sans-serif;
    height: 100vh;
    width: 100vw;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .intro {
    color: var(--neutral-4);
    text-align: center;
    text-shadow: 2px 2px 3px black;
  }
  .intro h2 {
    font-size: 2.5rem;
    margin: 0;
  }
  .intro h4 {
    font-size: 1.5rem;
    margin-top: 0;
    margin-bottom: 5px;
  }
  .form-container {
    padding: 0 40px;
    background: var(--accent-2);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
  }
  .form-container form {
    display: flex;
    flex-direction: column;
  }

  .form-container h2 {
    text-align: center;
    color: var(--primary-1);
    margin-bottom: 20px;
  }

  .form-container input,
  select {
    padding: 12px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 16px;
  }

  .form-container button {
    padding: 10px;
    margin: 10px;
    background-color: var(--primary-1);
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    cursor: pointer;
  }

  .form-container button:hover {
    background-color: #005ea2;
  }
  .menuOut {
    text-align: center;
    margin: 0;
    padding-bottom: 10px;
  }
  .callNow {
    color: var(--primary-2);
    padding: 10px;
    padding-bottom: 10px;
    font-size: 1.2rem;
    text-decoration: none;
    cursor: pointer;
  }
  /* Honeypot field (hidden from users) */
  .honeypot {
    display: none;
  }
</style>
