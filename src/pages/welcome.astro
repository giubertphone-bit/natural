---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <div class="welcome-container">
    <div class="imgCover">
      <div class="intro">
        <h2>
          Fresh Ideas. Greener Spaces.
          <h4>We’re Just Putting the Final Touches</h4>
        </h2>
      </div>
      <div class="form-container">
        <h2>Contact Us</h2>
        <form id="emailForm">
          <input type="email" name="email" placeholder="Email" required />
          <input type="text" name="name" placeholder="Name" required />
          <input type="tel" name="phone" placeholder="Phone Number" />

          <select name="interest" required>
            <option value="" disabled selected>I’m interested in…</option>
            <option value="Lawn Maintenance">Lawn Maintenance</option>
            <option value="Lawn Treatment">Lawn Treatment</option>
            <option value="Commercial Services">Commercial Services</option>
            <option value="Installations">Installations</option>
            <option value="Irrigation">Irrigation</option>
            <option value="Landscape Design">Landscape Design</option>
          </select>

          <input
            type="text"
            name="website"
            class="honeypot"
            autocomplete="off"
          />
          <button type="submit">Contact Us</button>
        </form>
      </div>
    </div>
  </div>
</Layout>
<script>
  const emailForm = document.getElementById("emailForm");
  if (emailForm) {
    emailForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const form = e.target as HTMLFormElement;
      if (!form) return;
      const formData = new FormData(form);
      const honeypot = formData.get("website") ?? "";
      if (honeypot !== "") return;

      const data = new URLSearchParams();
      data.append("email", String(formData.get("email") ?? ""));
      data.append("name", String(formData.get("name") ?? ""));
      data.append("phone", String(formData.get("phone") ?? ""));
      data.append("interest", form.interest.value);

      fetch(
        "https://script.google.com/macros/s/AKfycbz-8pFXRl2wJmHSxdT0oCua6hJ9EFfmEREg0znTaTcAie2V7uJD5-gbMPj2YwsD40S9/exec",
        {
          method: "POST",
          body: data,
        }
      )
        .then(() => {
          alert("Thanks for subscribing!");
          form.reset();
        })
        .catch(() => {
          alert("Submission failed. Please try again.");
        });
    });
  }
</script>

<style>
  .welcome-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .imgCover {
    margin: 0;
    padding: 0;
    background-image: url("/img/lawn.jpg");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed; /* Optional: keeps image fixed during scroll */
    font-family: Arial, sans-serif;
    height: 100vh;
    width: 100vw;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .intro {
    color: var(--neutral-4);
    text-align: center;
    text-shadow: 1px 1px 3px var(--primary-1);
  }
  .intro h2 {
    font-size: 2.5rem;
    margin-bottom: 10px;
  }
  .intro h4 {
    font-size: 1.5rem;
    margin-top: 0;
  }
  .form-container {
    padding: 20px 60px;
    background: var(--accent-2);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
  }
  .form-container form {
    display: flex;
    flex-direction: column;
  }

  .form-container h2 {
    text-align: center;
    color: var(--primary-1);
    margin-bottom: 20px;
  }

  .form-container input,
  select {
    padding: 12px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 16px;
  }

  .form-container button {
    padding: 12px;
    margin: 20px;
    background-color: var(--primary-1);
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
  }

  .form-container button:hover {
    background-color: #005ea2;
  }

  /* Honeypot field (hidden from users) */
  .honeypot {
    display: none;
  }
</style>
